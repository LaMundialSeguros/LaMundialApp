pluginManagement {
    // Cargar la propiedad 'flutter.sdk' desde local.properties
    def flutterSdkPath = file("local.properties").withInputStream { input ->
        def props = [:]  // Usar un mapa en lugar de Properties
        input.eachLine { line ->
            def (key, value) = line.split('=')
            props[key.trim()] = value.trim()
        }
        return props['flutter.sdk']  // Obtener la ruta de Flutter
    }

    assert flutterSdkPath != null, "flutter.sdk not set in local.properties"

    settings.ext.flutterSdkPath = flutterSdkPath

    // Incluir el build de Flutter
    includeBuild("${settings.ext.flutterSdkPath}/packages/flutter_tools/gradle")

    plugins {
        id "dev.flutter.flutter-gradle-plugin" version "1.0.0" apply false
    }
}

include ":app"
apply from: "${settings.ext.flutterSdkPath}/packages/flutter_tools/gradle/app_plugin_loader.gradle"